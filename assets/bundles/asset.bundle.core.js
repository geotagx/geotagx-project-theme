!function(a,b,c){"use strict";function d(a,b){z.push({name:a,data:b})}function e(a){var c={projectId:w,questionId:y,taskId:v,buttonValue:b(a.target).val()};analytics.fireEvent("action.answerQuestion",c)}function f(){var a={projectId:w,questionId:x};analytics.fireEvent("action.tutorialImageZoom",a)}function g(){var a={projectId:w,questionId:x,taskId:v};analytics.fireEvent("action.imageZoom",a)}function h(){var a={projectId:w,questionId:x};analytics.fireEvent("action.showTutorialImageSource",a)}function i(){var a={projectId:w,questionId:x,taskId:v};analytics.fireEvent("action.showImageSource",a)}function j(){var a={projectId:w,imageUrl:b("#image > img").data("src"),imageSource:b("#image-source").attr("href")};analytics.fireEvent("action.noTutorialImage",a)}function k(){var a={projectId:w,imageUrl:b("#image > img").data("src"),imageSource:b("#image-source").attr("href")};analytics.fireEvent("action.noImage",a)}function l(){var a={projectId:w,questionId:y};analytics.fireEvent("action.showPreviousTutorialQuestion",a)}function m(){var a={projectId:w,questionId:y,taskId:v};analytics.fireEvent("action.showPreviousQuestion",a)}function n(){var a={projectId:w,questionId:x};analytics.fireEvent("action.showTutorialComments",a)}function o(){var a={projectId:w,questionId:x,taskId:v};analytics.fireEvent("action.showComments",a)}function p(){var a={projectId:w,questionId:x};analytics.fireEvent("action.showTutorialHelp",a)}function q(){var a={projectId:w,questionId:x,taskId:v};analytics.fireEvent("action.showHelp",a)}function r(){var a={projectId:w,taskId:v};analytics.fireEvent("action.submitTask",a)}function s(){var a={projectId:w};d("action.skipTutorial",a)}function t(){var a={projectId:w};analytics.fireEvent("action.completeTutorial",a)}var u={},v=0,w=null,x=null,y=null,z=[];b(document).on("geotagx-analytics-disabled",function(){d=function(a,b){}}),b(document).on("geotagx-analytics-configured",function(){d=analytics.fireEvent.bind(analytics);for(var a=0;a<z.length;++a){var c=z[a];analytics.fireEvent(c.name,c.data)}z.length=0,b("#project-task-presenter.analysis .btn-answer").on("click.analytics",e),b("#project-task-presenter.tutorial #image").on("zoom.analytics",_debounce(f,350)),b("#project-task-presenter.analysis #image").on("zoom.analytics",_debounce(g,350)),b("#project-task-presenter.tutorial #image-source").on("click.analytics",h),b("#project-task-presenter.analysis #image-source").on("click.analytics",i),b("#project-task-presenter.tutorial #questionnaire-no-photo").on("click.analytics",j),b("#project-task-presenter.analysis #questionnaire-no-photo").on("click.analytics",k),b("#project-task-presenter.tutorial #questionnaire-rewind").on("click.analytics",l),b("#project-task-presenter.analysis #questionnaire-rewind").on("click.analytics",m),b("#project-task-presenter.tutorial #questionnaire-show-comments").on("click.analytics",n),b("#project-task-presenter.analysis #questionnaire-show-comments").on("click.analytics",o),b("#project-task-presenter.tutorial .help-toggle").on("click.analytics",p),b("#project-task-presenter.analysis .help-toggle").on("click.analytics",q),b("#submit-analysis").on("click.analytics",r),b("#skip-tutorial").on("click.analytics",s),b("#start-contributing").on("click.analytics",t)}),u.onTaskChanged=function(a){v=a;var b={projectId:w,taskId:v};analytics.fireEvent("action.startTask",b)},u.onQuestionChanged=function(a){y=null===x?a:x,x=a},u.onCorrectTutorialAnswer=function(){var a={projectId:w,questionId:x};analytics.fireEvent("action.correctTutorialAnswer",a)},u.onWrongTutorialAnswer=function(){var a={projectId:w,questionId:x};analytics.fireEvent("action.wrongTutorialAnswer",a)},u.onStartProject=function(a){w=a;var b={projectId:w};d("action.startProject",b)},u.onStartTutorial=function(a){w=a;var b={projectId:w};d("action.startTutorial",b)},a.analytics=u}(window.geotagx=window.geotagx||{},jQuery),function(a,b,c){"use strict";function d(a,b){var c=window.getComputedStyle(a,null);b.w=parseInt(c.width,10),b.h=parseInt(c.height,10),b.bgw=b.w,b.bgh=b.h,b.x=0,b.y=0,a.style.width="100%",a.style.height="100%",a.style.backgroundImage='url("'+a.src+'")',a.style.backgroundRepeat="no-repeat",a.style.backgroundSize="100% 100%",a.style.backgroundPosition="0 0",a.src=e(a.naturalWidth,a.naturalHeight)}function e(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c.toDataURL()}function f(a,b){b.x>0?b.x=0:b.x<b.w-b.bgw&&(b.x=b.w-b.bgw),b.y>0?b.y=0:b.y<b.h-b.bgh&&(b.y=b.h-b.bgh),a.style.backgroundSize=b.bgw+"px "+b.bgh+"px",a.style.backgroundPosition=b.x+"px "+b.y+"px"}function g(a,c,d,e,g){var h=a.attributes,i=e-h.x,j=g-h.y,k=i/h.bgw,l=j/h.bgh;0>c?(h.bgw+=h.bgw*d,h.bgh+=h.bgh*d):(h.bgw-=h.bgw*d,h.bgh-=h.bgh*d),h.x=e-h.bgw*k,h.y=g-h.bgh*l,h.bgw<=h.w||h.bgh<=h.h?(h.x=0,h.y=0,h.bgw=h.w,h.bgh=h.h):b(image).trigger("zoom",0>c?-1:1),f(a.image,h)}function h(a){a.preventDefault();var b=a.deltaY?a.deltaY:a.wheelDelta?-a.wheelDelta:0,c=this.image.getBoundingClientRect(),d=a.pageX-c.left-document.body.scrollLeft,e=a.pageY-c.top-document.body.scrollTop;switch(this.image.rotation){case 90:var f=d;d=e/c.height*c.width,e=c.height-f/c.width*c.height;break;case 180:d=c.width-d,e=c.height-e;break;case 270:var f=d;d=c.width-e/c.height*c.width,e=f/c.width*c.height}g(this,b,this.settings.zoomFactor,d,e)}function i(a){function b(a){var b=a.pageX-e.e.pageX,c=a.pageY-e.e.pageY;switch(e.e=a,a.preventDefault(),d.rotation){case 90:e.x+=c,e.y-=b;break;case 180:e.x-=b,e.y-=c;break;case 270:e.x-=c,e.y+=b;break;default:e.x+=b,e.y+=c}f(d,e)}function c(){document.removeEventListener("mouseup",c),document.removeEventListener("mousemove",b)}a.preventDefault();var d=this.image,e=this.attributes;e.e=a,document.addEventListener("mousemove",b),document.addEventListener("mouseup",c)}function j(a,b){b=(360+b)%360;var c=a.frame,d=a.image,e=90===b||270===b?1/d.aspectRatio:d.aspectRatio,f=c.offsetWidth,g=f/e;c.style.height=g+"px",f=c.offsetWidth;var h=1,i=1;e!==d.aspectRatio&&(h=g/f,i=f/g),d.rotation=b,d.style.transform=d.style.oTransform=d.style.msTransform=d.style.mozTransform=d.style.webkitTransform="rotate("+d.rotation+"deg) scale("+h+", "+i+")";var j=window.getComputedStyle(d,null);a.attributes.w=parseInt(j.width,10),a.attributes.h=parseInt(j.height,10),k.prototype.zoomReset.call(a)}var k=function(a,c){this.frame=document.getElementById(a),this.frame.style.overflow="hidden",this.frame.style.backgroundColor="rgba(0, 0, 0, 0.25)",this.busyIcon=this.frame.appendChild(document.createElement("i")),this.busyIcon.className="fa fa-3x fa-cog fa-spin",this.busyIcon.style.color="#FFF",this.busyIcon.style.position="absolute",this.busyIcon.style.display="none",this.image=this.frame.appendChild(document.createElement("img")),this.image.addEventListener("wheel",h.bind(this)),this.image.addEventListener("mousedown",i.bind(this)),this.image.aspectRatio=0,this.image.rotation=0,this.settings=b.extend({zoomFactor:.15,discreetZoomFactor:.45},c),this.attributes={x:0,y:0,w:0,h:0,bgw:0,bgh:0,e:null}};k.prototype.getSource=function(){return b(this.image).data("src")},k.prototype.setSource=function(a){if("string"===b.type(a)){var c=this;b(c.image).fadeOut(100,function(){if(b(c.image).data("src")==a)k.prototype.zoomReset.call(c),b(c.image).fadeIn();else{c.busyIcon.style.display="block",b(c.image).attr("src",a).data("src",a);var e=setInterval(function(){if(c.image.complete){clearInterval(e),c.image.aspectRatio=c.image.naturalWidth/c.image.naturalHeight;var a=c.frame.offsetWidth,f=Math.ceil(a/c.image.aspectRatio),g=.5*(a-c.busyIcon.offsetWidth),h=.5*(f-c.busyIcon.offsetHeight);c.busyIcon.style.display="none",b(c.image).fadeIn(0,function(){c.frame.style.height=f+"px",c.busyIcon.style.left=g+"px",c.busyIcon.style.top=h+"px",d(c.image,c.attributes),j(c,0)})}},300)}})}},k.prototype.zoomIn=function(){var a=this.image.width/2,b=this.image.height/2;g(this,-1,this.settings.discreetZoomFactor,a,b)},k.prototype.zoomOut=function(){var a=this.image.width/2,b=this.image.height/2;g(this,1,this.settings.discreetZoomFactor,a,b)},k.prototype.zoomReset=function(){this.attributes.x=0,this.attributes.y=0,this.attributes.bgw=this.attributes.w,this.attributes.bgh=this.attributes.h,f(this.image,this.attributes)},k.prototype.rotateLeft=function(){j(this,this.image.rotation-90)},k.prototype.rotateRight=function(){j(this,this.image.rotation+90)},a.Image=k}(window.geotagx=window.geotagx||{},jQuery),function(a,b,c){"use strict";function d(a,c){b.isEmptyObject(a)?c.resolve(a):(a.photoAccessible=!0,b("<img>").load(function(){c.resolve(a)}).error(function(b){a.photoAccessible=!1,c.resolve(a)}).attr("src",a.info.image_url))}function e(c,d){b.isEmptyObject(c)?(b("#participation-appreciation-section").removeClass("hide"),b("#questionnaire-section").addClass("hide"),b("#image-section").addClass("hide"),b("#project-task-presenter-header").addClass("hide")):c.photoAccessible?(b(".show-on-task-loaded").removeClass("show-on-task-loaded").hide().fadeIn(200),b(".hide-on-task-loaded").hide(),pybossa.userProgress(g).done(function(a){b("#project-task-count").text(a.done+"/"+a.total)}),a.questionnaire.setImage(c.info.image_url,c.info.source_uri),b("#submit-analysis").off("click.task").on("click.task",function(){var a=b("#submit-analysis"),e=b("#questionnaire-busy-icon");e.removeClass("hide").hide().fadeIn(300),a.toggleClass("busy btn-success"),a.prop("disabled",!0),f(c,d)}),a.analytics.onTaskChanged(c.id),a.questionnaire.start()):f(c,d)}function f(c,d){function e(){d.resolve()}var f=a.questionnaire.getAnswers();if(f.img=c.info.image_url,f.photoAccessible=c.photoAccessible,f.photoVisible=f.photoAccessible&&f.photoVisible,c.photoAccessible===!1)pybossa.saveTask(c.id,f).done(e).fail(e);else if(c.photoAccessible===!0){var g=b("#submit-analysis"),h=b("#questionnaire-busy-icon");pybossa.saveTask(c.id,f).done(function(){h.fadeOut(300,function(){b(this).addClass("hide")});var a=b("#submit-message-success");a.removeClass("hide"),setTimeout(function(){d.resolve(),a.addClass("hide"),g.toggleClass("busy btn-success"),g.prop("disabled",!1)},1500)}).fail(function(a){h.fadeOut(300,function(){b(this).addClass("hide")}),g.toggleClass("busy btn-success"),g.prop("disabled",!1);var c=b("#submit-message-failure");403===a.status?(d.resolve(),c.addClass("hide")):(c.removeClass("hide"),g.one("click",function(){c.addClass("hide")}))})}}var g,h={};h.start=function(c,f,h,i){return"string"!==b.type(c)?void console.log("[geotagx::pybossa::start] Error! Invalid project slug."):(g=c,a.questionnaire.setControlFlow(f),void(h?(a.tutorial.start(c,i),a.analytics.onStartTutorial(g)):(pybossa.taskLoaded(d),pybossa.presentTask(e),pybossa.run(g),a.analytics.onStartProject(g))))},h.getShortName=function(){return g},a.pybossa=h}(window.geotagx=window.geotagx||{},jQuery),function(a,b,c){"use strict";function d(){A.photoVisible=!0,b(".answer").each(function(){var a=b.trim(b(this).data("key"));a.length>0&&(A[a]=null)})}function e(){b.isEmptyObject(a.ol)||b(".geotagx-ol-map").each(function(){var c=b(this),d=b.trim(c.attr("id"));d.length>0&&a.ol.createMap(d,b.trim(c.data("location")))})}function f(){var a=b("#disqus_thread"),c=b("#questionnaire-show-comments"),d=b("#questionnaire-hide-comments");c.one("click.questionnaire",function(){var a="geotagx";!function(){var b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src="//"+a+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(b)}()}).on("click.questionnaire",function(){b(this).fadeOut(100,function(){b(this).addClass("hide"),d.removeClass("hide").hide().fadeIn(150),a.removeClass("hide").hide().fadeIn(100)})}),d.on("click.questionnaire",function(){b(this).fadeOut(100,function(){b(this).addClass("hide"),c.removeClass("hide").hide().fadeIn(150),a.fadeOut(100,function(){b(this).addClass("hide")})})})}function g(){if(b.prototype.datetimepicker){var a=b(".datetime-picker");a.length>0&&a.datetimepicker({format:"YYYY/MM/DD HH:mm:ss",inline:!0,sideBySide:!0,icons:{up:"fa fa-2x fa-chevron-up",down:"fa fa-2x fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}});var c=b(".date-picker");c.length>0&&c.datetimepicker({format:"YYYY-MM-DD",inline:!0,icons:{next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}})}}function h(){B=new a.Image("image"),b("#image-zoom-in").on("click.questionnaire",B.zoomIn.bind(B)),b("#image-zoom-out").on("click.questionnaire",B.zoomOut.bind(B)),b("#image-rotate-left").on("click.questionnaire",B.rotateLeft.bind(B)),b("#image-rotate-right").on("click.questionnaire",B.rotateRight.bind(B))}function i(a){var c=b(a.target),d=l(),e=q(u(d),c);r(d,e),I(d,e)}function j(){A.photoVisible=!1,z.finish()}function k(a){return"string"===b.type(a)&&b.trim(a).length>0&&("end"===a||a in A)}function l(){return F.length>0?F[F.length-1]:null}function m(a,c){var d=null;if(G&&a in G){var e=G[a],f=b.type(e);"string"===f?d=b.trim(e):"object"===f&&(c=b.trim(c.toLowerCase()),"binary"===u(a)&&(c="yes"===c?"yes":"no"),c in e&&(d=e[c]))}if(!k(d)){var g=t(a);g&&(d=g.next().data("key")||null)}return d||"end"}function n(){if(F.length>1){var c=l();p(c),r(c,null),F.pop();var d=l(),e=t(d);e&&e.length>0&&(H(d),e.removeClass("hide").hide().fadeIn(300)),1===F.length&&(b("#questionnaire-rewind").prop("disabled",!0),b("#questionnaire-no-photo").prop("disabled",!1),A.photoVisible=!0);var f=e.data("index");y(F.length>0?x(f-1):0),a.analytics.onQuestionChanged(f)}else console.log("[geotagx::questionnaire::showPreviousQuestion] Error! Could not load the previous question!")}function o(c){if(k(c)){var d=v(c),e=F.length>0;if(e&&p(l()),b("#questionnaire-rewind").prop("disabled",!e),b("#questionnaire-no-photo").prop("disabled",e),F.push(c),"end"===c)y(100);else if(s(c)){var f=t(c);f&&f.length>0&&(H(c),f.removeClass("hide").hide().fadeIn(300,function(){var c=f.data("type");if("geotagging"===c){var d=b(".geotagx-ol-map",f);if(d.length>0){var e=d.attr("id");if(e){var g=a.ol.findMap(e);g&&g.updateSize()}}}})),y(e?x(d-1):0)}a.analytics.onQuestionChanged(d)}else console.log("[geotagx::questionnaire::showQuestion] Error! Invalid question key '"+c+"'.")}function p(a){var b=t(a);b&&b.length>0&&b.addClass("hide")}function q(c,d){function e(a){var c="";if(a&&a.length>0){var d=b.trim(a.data("other-input-id"));if(d.length>0){var e=b("#"+d);if(e.length>0){var f=b.trim(e.val());c="Other"+(f.length>0?"["+f+"]":"")}}else c=b.trim(a.val())}return c}function f(a){var c="";return a.each(function(){var a=e(b(this));a.length>0&&(c+=", "+a)}),c.substring(2)}var g=d.attr("value");if("Done"!==g)return g;switch(c){case"dropdown-list":var h=b("#"+d.data("input-id")),i=b(":checked:not(:disabled)",h);return i.length>0?b.trim(i.val()):"None";case"select":var i=b("input:checked",d.siblings("label")),j=e(i);return j.length>0?j:"None";case"checklist":var k=b("input:checked",d.siblings("label")),j=f(k);return j.length>0?j:"None";case"illustrative-checklist":var l=b(".illustration",d.siblings(".illustrations")),h=b("input[type='checkbox']:checked",l),m=b.trim(b("input[type='text']",l).val());return m.length>0&&(m="Other["+m+"]"),g=m,g?0===h.length?g:g+", "+f(h):0===h.length?"None":f(h);case"geotagging":var n=null,o=d.data("target-id");if(o){var p=a.ol.findMap(o);p&&(n=p.getSelection())}return n;case"url":case"text":case"longtext":return b.trim(b("#"+d.data("input-id")).val());case"number":var q=b.trim(b("#"+d.data("input-id")).val());return q?parseFloat(q):null;case"datetime":var r=b("#"+d.data("input-id")).data("DateTimePicker").date();return null!==r?r.format("X"):null;case"date":var s=b("#"+d.data("input-id")).data("DateTimePicker").date();return null!==s?s.format("YYYY-MM-DD"):null;default:return console.log("[geotagx::questionnaire::parseAnswer] Error! Unknown question type '"+c+"'."),null}}function r(a,c){k(a)&&"end"!==a&&(A[a]="undefined"===b.type(c)?null:c)}function s(a){return a in A}function t(a){return s(a)?b(".question[data-key='"+a+"']"):null}function u(a){return"end"===a?null:t(a).data("type")}function v(a){return"end"===a?-1:t(a).data("index")}function w(){b("textarea").val(""),b("input").removeAttr("checked"),b("input[type='text']").val(""),b("input[type='url']").val(""),b("input[type='number']").val(""),b("select > option:eq(0)").prop("selected",!0),b([".datetime-picker",".date-picker"]).each(function(){var a=b(this);a.length>0&&a.data("DateTimePicker")&&a.data("DateTimePicker").clear()}),a.ol.resetAllMaps()}function x(a){return Math.max(0,Math.min(100,(a/D*100).toFixed(0)))}function y(a){100===a?(b("#current-analysis-progress").html(100),b("#questionnaire-progress-bar").css("width","100%"),b("#questionnaire-status-panel").addClass("analysis-complete")):(b("#current-analysis-progress").html(a),b("#questionnaire-progress-bar").css("width",a+"%"),b("#questionnaire-status-panel").removeClass("analysis-complete"))}var z={},A={},B=null,C=null,D=0,E=null,F=[],G=null,H=function(){};b(document).ready(function(){C=b(".question"),D=C.length,E=C.first().data("key"),d(),e(),f(),g(),h(),b(".btn-answer").on("click.questionnaire",i),b("#questionnaire-no-photo").on("click",j),b("#questionnaire-rewind").on("click",n)});var I=function(a,b){o(m(a,b))};z.start=function(c){C.addClass("hide"),w(),F=[],b("#questionnaire-show-comments").prop("disabled",!1);for(var d in A)A[d]=null;k(c)&&(E=c),z.showQuestion(E),a.tour.questionnaireTourEnded()||setTimeout(a.tour.startQuestionnaireTour,1e3)},z.finish=function(){z.showQuestion("end")},z.setControlFlow=function(a){G=a},z.setImage=function(a,c){B.setSource(a),b("#image-source").attr("href",c)},z.getNextQuestionKey=function(a,c){return m(b.trim(a),c)},z.getNumberOfQuestions=function(){return D},z.getQuestionType=function(a){return u(b.trim(a))},z.getAnswer=function(a){var b=null;return s(a)?b=A[a]:console.log("[geotagx::questionnaire::getAnswer] Warning! Could not find a storage key for the question with the key '"+a+"'."),b},z.getAnswers=function(){return A},z.getCurrentQuestionKey=l,z.onShowNextQuestion=function(a){a&&"function"===b.type(a)&&(I=a)},z.showPreviousQuestion=n,z.showQuestion=function(a){o(b.trim(a))},z.showNextQuestion=function(a,c){I(b.trim(a),c)},z.onBeforeShowQuestion=function(a){H="function"===b.type(a)?a:function(){}},a.questionnaire=z}(window.geotagx=window.geotagx||{},jQuery),function(a,b,c){"use strict";function d(){var b=".question[data-id='"+a.questionnaire.getCurrentQuestion()+"']",c=this.element;if(b!==c.substring(1,b.length)){var d=c.substring(c.indexOf("']")+2);this.element=b+d}}var e={},f=null;e.questionnaireTourEnded=function(){return"yes"===localStorage.getItem("geotagx_questionnaire_tour_end")},e.startQuestionnaireTour=function(){f||(f=new Tour({name:"geotagx_questionnaire_tour",orphan:!0,steps:[{orphan:!0,title:"Welcome!",content:"It seems as though you are new around here. How about we take a tour?<br><small>Note: You can navigate faster by using the <kbd>&#8592;</kbd> and <kbd>&#8594;</kbd> arrow keys.</small>"},{element:"#questionnaire-status-panel",placement:"bottom",title:"The Status Panel",content:"This section provides feedback as you progress through the questionnaire."},{element:"#image-section",placement:"top",title:"The Image",content:"You will be tasked with analysing an image. When you complete an analysis, a new image will be presented to you."},{element:".question[data-id='1'] > .answer button[value='NotClear']",onShow:d,placement:"bottom",title:"Image not clear enough",content:"Certain factors may limit how much information you can take away from an image. For instance, it is almost impossible to deduce the color of the sky from a black and white photo, or discern a person's facial features from a blurry photo. Select this if you can not answer a question based on what you see in the image."},{element:".question[data-id='1'] > .title",onShow:d,placement:"bottom",title:"The Question",content:"This is one of many questions asked about the image to the right. Try to answer it to the best of your capabilities ..."},{element:".question[data-id='1'] .help-toggle",onShow:d,placement:"bottom",title:"Help!",content:"... but remember, if you are having trouble answering a question, take a look at the help ..."},{element:"#image-source",placement:"bottom",title:"Image source",content:"... and the image source. More often than not, the source will give you contextual information that may prove to be invaluable."},{element:".question[data-id='1'] > .answer button[value='Unknown']",onShow:d,placement:"bottom",title:"You're only human",content:"Sometimes a question may prove challenging. If you can not answer it, your best bet is to select this answer."}]}),f.init()),localStorage.setItem("geotagx_questionnaire_tour_current_step",0),f.start(!0)},a.tour=e}(window.geotagx=window.geotagx||{},jQuery),function(a,b,c){"use strict";function d(b){a.questionnaire.setImage(b.image,b.image_source),m=b.assertions}function e(b,c){for(var d=a.questionnaire.getNextQuestionKey(b,c),e=m[d];e&&e.skip;)d=a.questionnaire.getNextQuestionKey(d,"Unknown"),e=m[d];return d}function f(a){var c=m[a];if(c){var d=c.autocomplete;if(d){var e=".question[data-key='"+a+"'] .answer ",f=b(e+"input");if(f.length>0){f.val(c.expects),f.prop("disabled",!0);var g=b(".question[data-key='"+a+"'] .answer button.btn-answer[value='Done']");g.length>0&&g.trigger("click")}}}}function g(c,d,f){var g=m[c],i=g.default_message,j=!1;if("string"===b.type(d)){j=d.toLowerCase()===g.expects.toLowerCase();var k=g.messages;i=k[d]||k[d.toLowerCase()]||k[d.toUpperCase()]||i}else j=d===g.expects;j?(n=e(c,d),a.analytics.onCorrectTutorialAnswer()):a.analytics.onWrongTutorialAnswer(),h(i,j)}function h(a,c){var d=b("#tutorial-message-box");d.removeClass("hide").hide(),c?(d.addClass("expected"),b("#tutorial-success-message").html(a)):(d.removeClass("expected"),b("#tutorial-failure-message").html(a)),d.fadeIn(250)}function i(a){b("#tutorial-message-box").fadeOut(150,function(){b(this).addClass("hide"),a&&"function"===b.type(a)&&a()})}var j={},k=0,l=0,m=null,n=0;j.start=function(c,e){return"string"!==b.type(c)?void console.log("[geotagx::project::start] Error! Invalid project slug."):(b(".show-on-task-loaded").removeClass("show-on-task-loaded").hide().fadeIn(200),b(".hide-on-task-loaded").hide(),b("#questionnaire-rewind").on("click.tutorial",i),b("#tutorial-next-question").on("click.tutorial",function(){i(function(){a.questionnaire.showQuestion(n)})}),b("#take-another-tutorial").on("click.tutorial",function(){l=(l+1)%k,d(e[l]),a.questionnaire.start()}),k=e.length,l=Math.floor(Math.random()*k),d(e[l]),a.questionnaire.onBeforeShowQuestion(f),a.questionnaire.onShowNextQuestion(g),void a.questionnaire.start())},a.tutorial=j}(window.geotagx=window.geotagx||{},jQuery);